<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>World Wide Web. HTTP</title>

    <meta name="author" content="Sergey Krauchenia">

    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

    <link rel="stylesheet" href="reveal/css/reveal.css">
    <link rel="stylesheet" href="reveal/css/theme/exadel/exadel.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="reveal/lib/css/googlecode.css">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
        document.write('<link rel="stylesheet" href="reveal/css/print/' + ( window.location.search.match(/print-pdf/gi) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">');
    </script>
    <style>
        .middle-block {
            position: absolute;
            top: 26%;
            left: 16%;
        }

        .p-left {
            text-align: left;
        }
    </style>
</head>

<body>

<div id="exadel-header"></div>

<div class="reveal">
    <div class="slides"><!-- Any section element inside of this container is displayed as a slide -->

    <section>
        <h1 style="margin-top: 150px;">World wide web</h1>

        <h1>HTTP protocol</h1>
        <i>© 2014 Sergey Krauchenia</i>

    </section>

    <section>
        <h1>Интернет в 2005 году</h1>
        <img src="networking.files/Internet_map_2005.jpg">
    </section>

    <section>
        <h1>internet-map.net</h1>
        <img src="networking.files/Internet_map_circles.png">
    </section>

    <section>
        <h1>World Wide Web Consortium</h1>
        <dl>
            <dt>W3C</dt>
            <dd><i>организация, разрабатывающая и внедряющая технологические стандарты для Всемирной паутины</i></dd>
            <dd>лучший источник знаний о сети. Их сайт - <a href="http://w3c.org">w3c.org</a></dd>
        </dl>
    </section>

    <section>
        <section id="www-caption">
            <div class="middle-block">
                <h1>World Wide Web</h1>
            </div>
        </section>
        <section id="page-example">
            <p>Пример страницы</p>
            <img src="networking.files/page_example.png"/>
        </section>
        <section id="client-side">
            <h1>Client side</h1>
            <dl>
                <dt>Клиентом выступает браузер</dt>
                <dd>пример: Chrome, firefox, opera, safari</dd>
                <dt>Internet Explorer</dt>
                <dd>программа для скачивания браузеров</dd>
            </dl>
        </section>
        <section id="url-1">
            <h1>URL (1/2)</h1>
            <h3>Uniform resource locator</h3>
            <p>URL состоит из трех частей:</p>
            <ul>
                <li>протокол</li>
                <li>доменное имя сервера</li>
                <li>путь к странице</li>
            </ul>
        </section>
        <section id="url-2">
            <h1>URL (2/2)</h1>
            <p>Пример</p>
            <pre>
                <code>
    http://www.google.ru/intl/ru/about/index.html
                </code>
            </pre>
            <ul>
                <li><b>protocol</b> - http</li>
                <li><b>DNS имя</b> - www.google.ru</li>
                <li><b>путь</b> - /intl/ru/about/index.html</li>
            </ul>
        </section>
        <section id="click-workflow">
            <h3>Что же произойдет, если я кликну по ссылке?</h3>
            <ul>
                <li>Браузер определяет URL</li>
                <li>Браузер спрашивает у DNS по имени <b>www.google.ru</b> IP сервера</li>
                <li>DNS отвечает <b>74.125.131.94</b></li>
                <li>Браузер устанавливает TCP соединение с 74.125.131.94 на порту 80 (по умолчанию для протокола HTTP)</li>
                <li>Браузер посылает запрос по HTTP, запрашивая страницу <b>/intl/ru/about/index.html</b></li>
                <li>www.google.ru возвращает HTTP ответ</li>
                <li>Если на странице есть другие URL’ы, которые нужно подгрузить, браузер повторяет процесс и для них</li>
                <li>Браузер отображает страницу</li>
                <li>TCP соединение закрывается</li>
            </ul>
        </section>
        <section id="mime-types">
            <h1>MIME-типы</h1>
            <table>
                <tr>
                    <th>Тип</th>
                    <th>Пример подтипа</th>
                    <th>Описание</th>
                </tr>
                <tr>
                    <td><b>text</b></td>
                    <td>plain, <b>html</b>, xml, css</td>
                    <td>Тексты в разном формате</td>
                </tr>
                <tr>
                    <td>image</td>
                    <td>gif, jpeg, tiff</td>
                    <td>картинки</td>
                </tr>
                <tr>
                    <td>audio</td>
                    <td>basic, mpeg, mp4</td>
                    <td>звуки</td>
                </tr>
                <tr>
                    <td>video</td>
                    <td>mpeg, mp4, quicktime</td>
                    <td>видео</td>
                </tr>
                <tr>
                    <td>application</td>
                    <td>octet-stream, pdf, javascript, zip</td>
                    <td>данные, произведенные приложением</td>
                </tr>
            </table>
        </section>
        <section id="html-reference-2">
            <h1>HTML (1/2)</h1>
            <h3>HyperText Markup Language</h3>
            <p>Язык HTML интерпретируется браузерами и отображается в виде документа в удобной для человека форме</p>
        </section>
        <section id="html-reference-1">
            <h1>HTML (2/2)</h1>
            <p>Пример:</p>
            <pre>
                <code class="html">
    &lt;html&gt;
        &lt;head&gt;
            &lt;title&gt;Sample&lt;/title&gt;
        &lt;/head&gt;
        &lt;body&gt;
            &lt;h1&gt;Hello, world&lt;/h1&gt;
        &lt;/body&gt;
    &lt;/html&gt;
                </code>
            </pre>
        </section>
        <section id="server-side-general-workflow">
            <h1>Server side</h1>
            <p>Основные шаги, которые делает сервер после того, как клиент отправил запрос</p>
            <ol>
                <li>Принимает TCP соединение от клиента (браузера)</li>
                <li>Достает из запроса путь к странице</li>
                <li>Получает доступ к странице на диске или, если это динамический ресурс, выполняет команду, которая подготавливает страницу</li>
                <li>Посылает файл обратно клиенту</li>
                <li>Освобождает соединение</li>
            </ol>
        </section>
        <section id="server-side-diagram">
            <h1>Простой пример архитектуры сервера (1/2)</h1>
            <img src="networking.files/server-architecture-example.png"/>
        </section>
        <section id="processing-module-workflow">
            <h1>(2/2)</h1>
            <p>Шаги, которые может предпринимать модуль-обработчик:</p>
            <ol>
                <li>Определяет имя запрашиваемой страницы</li>
                <li>Проверяет права доступа</li>
                <li>Проверяет кэш на наличие закешированных данных</li>
                <li>Получает запрошенную страницу с диска или вызывает обработчик, который ее сгенерирует</li>
                <li>Конструирует остаток ответа (MIME-тип и т.д.)</li>
                <li>Возвращает ответ клиенту</li>
                <li>Логирует информацию о проделанной работе</li>
            </ol>
        </section>
    </section>

    <section>
        <section id="http-caption">
            <h1>HTTP</h1>
            <h3>HyperText Transfer Protocol - протокол передачи гипертекста</h3>
        </section>
        <section id="http-definition">
            <span class="thesis"><b>HTTP</b> это простой текстовый протокол прикладного уровня, основанный на принципе request-response. Он определяет в каком виде клиент должен слать запросы серверу и что за ответы он получит обратно. </span>
        </section>
        <section id="connection-1">
            <h2>Соединение (TCP:80)</h2>
            <img src="networking.files/connection-example.png">
        </section>
        <section id="connection-2">
            <h2>Соединение</h2>
            <dl>
                <dt>(b) persistent connections (постоянное соединение)</dt>
                <dd>после того, как получена страница, позволяет переиспользовать открытое соединение для оставшихся запросов</dd>
                <dt>(c) HTTP pipelining (конвейерная обработка запросов)</dt>
                <dd>позволяет посылать запрос номер 2 еще до того, как запрос номер 1 получил ответ</dd>
            </dl>
        </section>
        <section id="methods">
            <h1>HTTP методы</h1>
            <p>HTTP определяет список стандартных типов запроса (методов)</p>
            <span class="thesis">HTTP запрос состоит из нескольких строк текста, содержащих ASCII символы. Первое слово первой строки всегда должно быть имя метода. Имена чувствительны к регистру</span>
            <p>Пример:</p>
            <pre><code>GET /index.html HTTP/1.1</code></pre>
        </section>
        <section id="methods-list">
            <h1>Список методов:</h1>
            <ul>
                <li>GET - Используется для запроса содержимого указанного ресурса</li>
                <li>HEAD - Запрашивает заголовки запрашиваемого ресурса</li>
                <li>POST - Применяется для передачи пользовательских данных заданному ресурсу</li>
                <li>PUT - Применяется для загрузки содержимого запроса на указанный в запросе URI</li>
                <li>DELETE - Удаляет указанный ресурс</li>
                <li>TRACE - Возвращает полученный запрос так, что клиент может увидеть, какую информацию промежуточные серверы добавляют или изменяют в запросе</li>
                <li>OPTIONS - Используется для определения возможностей веб-сервера</li>
            </ul>
        </section>
        <section id="method-get">
            <h1>Метод GET</h1>
            <p>Примеры:</p>
            <pre><code>GET index.html HTTP/1.1</code></pre>
            <p>Можно указывать дополнительные параметры после знака вопроса, разделяя их амперсандом</p>
            <pre><code>GET /path/resource?param1=value1&amp;param2=value2 HTTP/1.1</code></pre>
        </section>
        <section id="method-post">
            <h1>Метод POST</h1>
            <p>Используется обычно для отправки пользовательских данных с формы на сервер</p>
            <p>Пример:</p>
            <p>Начальная строка:</p>
            <pre><code class="http">POST / HTTP/1.1</code></pre>
            <p>Заголовки:</p>
            <pre><code class="http">
Host: www.example.com
Connection: keep-alive
Cache-Control: max-age=0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
User-Agent: Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.68 Safari/537.17
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8,ru;q=0.6
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
            </code></pre>
            <p>Обязательная пустая строка:</p>
            <pre><code></code></pre>
            <p>Тело сообщения:</p>
            <pre><code class="http">
param1=value1&amp;param2=value2
            </code></pre>
        </section>
        <section id="http-response-1">
            <h1>HTTP Response</h1>
            <p>Пример 1:</p>
            <pre><code class="http">HTTP/1.1 200 OK</code></pre>
            <dl>
                <dt>1.1</dt>
                <dd>версия протокола</dd>
                <dt>200</dt>
                <dd>статус-код ответа</dd>
                <dt>OK</dt>
                <dd>текстовое короткое пояснение к коду</dd>
            </dl>
        </section>
        <section id="http-response-2">
            <p>Пример 2:</p>
            <p>Начальная строка:</p>
            <pre><code class="HTTP">HTTP/1.1 200 OK</code></pre>

            <p>Заголовки</p>
                    <pre><code class="HTTP">Server: nginx/1.2.1
Date: Fri, 08 Feb 2013 11:04:05 GMT
Content-Type: text/html;charset=utf-8
Transfer-Encoding: chunked
Connection: keep-alive
Status: 200
Content-Encoding: gzip</code></pre>
            <p>Обязательная пустая строка</p>
            <pre><code><br></code></pre>
            <p>Тело сообщения</p>
                    <pre><code>&lt;html&gt;
    &lt;head&gt;
        ...
    &lt;/head&gt;
    &lt;body&gt;
        ...
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
        </section>
        <section id="status-code-groups">
            <h1>Группы статус-кодов</h1>
            <ul>
                <li>1xx &mdash; информационные</li>
                <li>2xx &mdash; успешные</li>
                <li>3xx &mdash; перенаправление</li>
                <li>4xx &mdash; ошибки клиента</li>
                <li>5xx &mdash; ошибки сервера</li>
            </ul>

            <p>Наиболее частые статусы:</p>
            <ul>
                <li>200 OK</li>
                <li>403 Forbidden</li>
                <li>404 Not Found</li>
                <li>502 Bad Gateway</li>
                <li>504 Gateway Timeout</li>
            </ul>
        </section>
        <section id="message-headers-1">
            <h1>Заголовки сообщений (1/5)</h1>
            <dl>
                <dt>User-Agent</dt>
                <dd>позволяет сообщить серверу какой браузер использует клиент</dd>
                <dt>Accept, Accept-Charset, Accept-Encoding, Accept-Language</dt>
                <dd>говорят серверу, что клиент хотел бы принимать</dd>
                <dt>If-Modified-Since и If-None-Match</dt>
                <dd>используется в кешировании</dd>
            </dl>
        </section>
        <section id="message-headers-2">
            <h1>Заголовки сообщений (2/5)</h1>
            <dl>
                <dt>Host</dt>
                <dd>содержит имя сервера и является обязательным</dd>
                <dt>Authorization</dt>
                <dd>используется для тех случаев, когда доступ к странице ограничен</dd>
                <dt>Referer</dt>
                <dd>откуда пользователь пришел</dd>
            </dl>
        </section>
        <section id="message-headers-3">
            <h1>Заголовки сообщений (3/5)</h1>
            <dl>
                <dt>Set-Cookie, Cookie</dt>
                <dd>позволяет управлять куками</dd>
                <dt>Content-Encoding, Content-Language, Content-Length, Content-Type, Content-Range</dt>
                <dd>позволяют серверу описать контент, который он посылает клиенту</dd>
                <dt>Last-modified</dt>
                <dd>дата последнего изменения страницы</dd>
            </dl>
        </section>
        <section id="message-headers-4">
            <h1>Заголовки сообщений (4/5)</h1>
            <dl>
                <dt>Expires</dt>
                <dd>когда страница перестанет быть актуальной</dd>
                <dt>Location</dt>
                <dd>сообщить клиенту какой URL ему следует использовать</dd>
                <dt>Range</dt>
                <dd>диапазон запрашиваемого контента</dd>
            </dl>
        </section>
        <section id="message-headers-5">
            <h1>Заголовки сообщений (5/5)</h1>
            <dl>
                <dt>Date</dt>
                <dd>дата и время запроса или ответа</dd>
                <dt>Etag</dt>
                <dd>короткий идентификатор страницы</dd>
                <dt>Cache-Control</dt>
                <dd>стратегия управления кешем</dd>
            </dl>
        </section>
        <section id="caching">
            <h1>Кеширование:</h1>
            <p>Какие стратегии можно использовать для кеширования?</p>
            <ol>
                <li>Использование заголовка Expires</li>
                <li>Conditional GET</li>
            </ol>
        </section>
        <section>
            <h3>Conditional GET (1/2)</h3>
            <img src="networking.files/conditional-get.png">
        </section>
        <section>
            <h3>Conditional GET (2/2)</h3>
            <p>Какие заголовки можно использовать, чтобы составить Conditional GET:</p>
            <ul>
                <li>If-Modified-Since</li>
                <li>If-Unmodified-Since</li>
                <li>If-Match</li>
                <li>If-None-Match</li>
                <li>If-Range</li>
            </ul>
        </section>
        <section>
            <h1>Cache-Control</h1>
            <span class="thesis">Сервер может явным образом установить поведение, касающееся кеширования или скорее некеширования, используя Cache-Control. Выставив значение в no-cache, сервер даст понять клиенту, что не хочет, чтобы контент кешировали.</span>
        </section>
    </section>

    <section>
        <p>Используем Java чтобы послать запрос на сервер</p>
        <pre><code>
try {
    URL url = new URL("http://www.gutenberg.org/cache/epub/3537/pg3537.txt");
    HttpURLConnection connection = (HttpURLConnection) url.openConnection();
    connection.setRequestMethod("GET");
    connection.setRequestProperty("Accept", "text/html");

    BufferedReader in = new BufferedReader(new InputStreamReader(connection.getInputStream()));
    String inputLine;
    while ((inputLine = in.readLine()) != null) {
        System.out.println(inputLine);
    }
    in.close();
} catch (Exception e) {
    e.printStackTrace();
}
        </code></pre>
    </section>

    <section>
        <section>
            <h1>Практические задания</h1>
        </section>
		<section>
        	<ol>
            	<li>Приведенный пример на Java не совсем рабочий. Исправьте его таким образом, чтобы в итоге текст книги печатался в консоль</li>
            	<li>Выведите в консоль все заголовки ответа</li>
			</ol>
		</section>
		<section>
			<span>Практика с инструментами разработчика в браузере. В качестве примера будет использоваться google chrome</span>
            <span>Запустите developer tools</span>
            <img src="networking.files/browser-1.png"/>
		</section>
        <section>
            <span>Наберите в адресной строке адрес любого ресурса (например <a href="https://google.ru">https://google.ru</a> и наблюдайте, как информация о запросах появляются в туле</span>
            <img src="networking.files/browser-2.png">
        </section>
        <section>
            <span>Выберите любой из них, чтобы увидеть подробную информацию</span>
            <img src="networking.files/browser-3.png">
        </section>
        <section>
            <span>Различные вкладки предлагают много полезной информации, например Timing покажет информацию о том, на что тратилось время</span>
            <img src="networking.files/browser-4.png">
        </section>
    </section>

    </div>
	<div class="progress" style="display: block;"><span></span></div>
	<div class="slide-number"></div>
</div>

<script src="reveal/lib/js/head.min.js"></script>
<script src="reveal/js/reveal.min.js"></script>

<script>
    Reveal.initialize({

        controls: true,// Display controls in the bottom right corner
        progress: true,	// Display a presentation progress bar
        history: true,// Push each slide change to the browser history
        keyboard: true,// Enable keyboard shortcuts for navigation
        overview: true,// Enable the slide overview mode
        center: true,	// Vertical centering of slides
        loop: false,// Loop the presentation
        rtl: false,	// Change the presentation direction to be RTL
        autoSlide: 0,
        mouseWheel: false,// Enable slide navigation via mouse wheel
        rollingLinks: false,// Apply a 3D roll to links on hover
        transition: 'linear', 	// Transition style default/cube/page/concave/zoom/linear/none

        dependencies: [
            // Cross-browser shim that fully implements classList - https://github.com/eligrey/classList.js/
            { src: 'reveal/lib/js/classList.js', condition: function () {
                return !document.body.classList;
            } },
            // Interpret Markdown in <section> elements
            { src: 'reveal/plugin/markdown/showdown.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            } },
            { src: 'reveal/plugin/markdown/markdown.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            } },
            // Syntax highlight for <code> elements
            { src: 'reveal/plugin/highlight/highlight.pack.js', async: true, callback: function () {
                hljs.tabReplace = '    ';
                hljs.initHighlightingOnLoad();
            } },
            // Zoom in and out with Alt+click
            { src: 'reveal/plugin/zoom-js/zoom.js', async: true, condition: function () {
                return !!document.body.classList;
            } },
            // Speaker notes
            { src: 'reveal/plugin/notes/notes.js', async: true, condition: function () {
                return !!document.body.classList;
            } },
            { src: 'reveal/plugin/clock/clock.js', async: true, callback: function () {
                clock.init("exadel-header");
            } }
        ]
    });
	
</script>
</body>
</html>
